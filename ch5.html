<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css2.css">
    <title>Ch5 Retired Dwarf</title>
</head>
<style>
    body{
    background-color:rgb(50, 150, 200);
    transition: background-color 6s ease-in-out, opacity 5s ease-in-out; /* 600 seconds = 10 minutes */
    }

    .item{
        width: 22%;
        height: auto;
    }
    .itinfo{
        display: none;
        color: rgb(9, 9, 9);
        width: 100%;
    }
    .wm{
        display: none;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        padding: 20px;
        border-radius: 10px;
    }
</style>
<body>
    <img src="./retired dwarf bar.png" alt="" style="height: 270px; position: relative; left: 26%;">
    <br><br>



    <p>礦工小矮人什麼都沒說的消失了，你再度來到退休小矮人的家...<br><br>
    The miner dwarf said nothing and disappeared. You arrive the house of the retired dwarf once again...
    </p>

    <!-- Background music -->
    <audio id="myAudio" loop>
        <source src="./LOD.wav" type="audio/wav">
    </audio>
    <audio id="myAudio2">
        <source src="./earn.wav" type="audio/wav">
    </audio>
<!--
    <div>
        <label for="fname">First name: </label>
        <input type="text" id="fname">
    </div>
-->
    
        
    
    <div>
        <br>
        <button id="sub"> 敲門詢問 <br>Knock and ask</button>
    </div>

    <!-- Passing message -->
    <div id="warningMessage">
        <p style="color: white;"> <br>
            "同胞! 需要我帶路嗎!" <br>"Mio amigo! Do you want to go back to the land of dwarf? Follow me!"<br><br><br><br>
            帽子對小矮人來說非常重要 <br>Hats are important to dwarfs <br><br>
            (退休小矮人順勢在你的口袋裡放進了一顆黃金... )<br> (The dwarf casually placed a piece of gold in your pocket...)
        <br><br>
        </p>
        <div style="left: 50%;">
            <button id="hideButton" >Confirm</button>
        </div>
    </div>





    <img src="./bag4.png" alt="" id="doo" style="width: 5%; position: fixed; bottom: 4%;">
    

    <div id="bag map" style="display: none; background-color: rgb(254, 253, 252); width: 15%; padding: 3px;border-style: dashed; border-color: rgb(193, 142, 13); border-radius: 10px; position: fixed; bottom: 18%;" >
        <p style="text-align: center;">Items</p>
        <img src="./5 d info.png" alt="" class="item" id="address">
        <img src="./blue hat.png" alt="" class="item" id="bluehat">
        <div style="left: 50%;">
            <div id="tt" style="width: 100%; background-color:rgb(254, 254, 253);">
                <p id="bluehati" class="itinfo">This a blue dwarf hat. 這是一頂藍色的矮人帽 <br><button class="btn" id="bluehatb">Use</button></p>
                <p id="addressi" class="itinfo">The info of the five dwarfs. 五個小矮人的資訊 <br><button class="btn" id="addressb">Use</button></p>
            </div><br>
            <button id="hideButtonbag" style="justify-content: center;">Confirm</button>
        </div>
    </div>

    <div class="wm" id="addressw">
        似乎沒有作用 <br>it doesn't work now. 
    </div>

    <div class="wm" id="bluehatw">
        你戴上了藍色矮人帽 <br>You wear the bluehat
    </div>










    <!-- JavaScript to play audio on any click -->
    <script>


        // Get the element
        var audio = document.getElementById('myAudio');
        var audio2 = document.getElementById('myAudio2');
        var warningMessage = document.getElementById("warningMessage");
        var subButton = document.getElementById("sub");
        var hideButton = document.getElementById("hideButton");
        var audioPlayed = false;  // Track if audio has already been played

        // Add an event listener for the 'click' event on the whole document
        document.addEventListener('click', function() {
            if (!audioPlayed) {  // Ensure audio only plays once
                // Start the audio playback when the user clicks anywhere
                audio.play();
                setTimeout(function() {
                    document.body.style.backgroundColor = 'rgb(100, 100, 100)'; // Ending color
                    //document.querySelector('label').style.color = 'rgb(251, 251, 251)';
                    document.querySelector('p').style.color = 'rgb(251, 251, 251)';
                }, 0); // Start immediately after the page loads
                audioPlayed = true;  // Mark that the audio has played
            }
        });

        // Submit button be clicked
        subButton.addEventListener("click", function() {
            // Display a warning message as an alert box
            //audio.pause();  // Pause the first audio
            //audio.currentTime = 0;  // Reset to the beginning of the first audio
            //audio2.play();  // Play the second audio
            alert("退休小矮人防備的從門邊露出他的頭，面無表情. The retired dwarf cautiously peers his head around the door, his face expressionles")
            //warningMessage.style.display = "block";  // Show the warning message
        });
            

        hideButton.addEventListener("click", function() {
            // Hide the text box
            warningMessage.style.display = "none";
            audio.play();
            setTimeout(function() {
                // Change the page's opacity
                document.body.style.opacity = 0; // Fade out the whole page
            }, 10); // Small delay before changing opacity

            // Redirect to another page after a short delay
            setTimeout(function() {
                window.location.href = "./ch6.html"; // Redirect to the second page
            }, 5000); // Wait 1 second (matching the opacity transition duration)
        });







        // bag
        var bag = document.getElementById('doo');
        var bagmap = document.getElementById("bag map");
        var hideButtonbag = document.getElementById("hideButtonbag");
        var addresst = document.getElementById('addressi');
        var addressi = document.getElementById('address');
        var addressb = document.getElementById('addressb');
        var addressw = document.getElementById('addressw');
        var bluehatt = document.getElementById('bluehati');
        var bluehati = document.getElementById('bluehat');
        var bluehatb = document.getElementById('bluehatb');
        var bluehatw = document.getElementById('bluehatw');

        bag.addEventListener("click", function() {
            bagmap.style.display = "block";
        });

        hideButtonbag.addEventListener("click", function() {
            // Hide the text box
            bagmap.style.display = "none";
        });

        //
        addressi.addEventListener("click", function() {
            bluehatt.style.display = "none";
            addresst.style.display = "block";
        });

        bluehati.addEventListener("click", function() {
            bluehatt.style.display = "block";
            addresst.style.display = "none";
        });

        

        addressb.addEventListener("click", function() {
            addressw.style.display = "block";
            setTimeout(function() {
                addressw.style.display = "none";
            }, 3000);    
        });

        bluehatb.addEventListener("click", function() {
            bluehatw.style.display = "block";
            setTimeout(function() {
                bluehatw.style.display = "none";
            }, 3000);
            setTimeout(function() {
                warningMessage.style.display = "block";
                audio.pause();
                audio2.play();
            }, 3000);   
            

            
        });

        

















    </script>
</body>
</html>